---

# ğŸ“œ README.md: Link-Collector (v2.0)

> **"From URL to Second Brain: The Ultimate Knowledge ETL Pipeline"**
> *ì›¹ìƒì˜ ë¹„ì •í˜• ì •ë³´(Chaos)ë¥¼ ë‹¹ì‹ ì˜ ì§€ì‹ ë°ì´í„°ë² ì´ìŠ¤(Order)ë¡œ ë³€í™˜í•˜ëŠ” ê°€ì¥ ì™„ë²½í•œ íŒŒì´í”„ë¼ì¸.*

---

## 1. Project Identity & Philosophy

**Link-Collector**ëŠ” ë‹¨ìˆœí•œ 'ë¶ë§ˆí¬' ë„êµ¬ê°€ ì•„ë‹™ë‹ˆë‹¤. ì •ë³´ì˜ ìˆ˜ì§‘(Capture), ê°€ê³µ(Process), ê·¸ë¦¬ê³  ì‹¤í–‰(Action)ì„ ìë™í™”í•˜ëŠ” **ì§€ì‹ ê´€ë¦¬ ë¯¸ë“¤ì›¨ì–´**ì…ë‹ˆë‹¤.

### ğŸš€ Core Value Proposition

1. **Frictionless Capture:** URLë§Œ ë˜ì§€ë©´ ë. ë‚˜ë¨¸ì§€ëŠ” ë´‡ì´ ì²˜ë¦¬í•©ë‹ˆë‹¤.
2. **Waterfall Scraping:** ë¹„ìš©ì€ ìµœì†Œí™”í•˜ê³ , ì„±ê³µë¥ ì€ 99.9%ë¡œ ìœ ì§€í•˜ëŠ” ë‹¤ì¸µ ë°©ì–´ ë¡œì§.
3. **Platform Agnostic:** Notionì— ì¢…ì†ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. **Markdown(Obsidian, Logseq)** ì§€ì›ìœ¼ë¡œ íƒˆ-í”Œë«í¼(Anti-Platform Risk)ì„ ì§€í–¥í•©ë‹ˆë‹¤.
4. **Actionable Insight:** "ì½ì„ ê±°ë¦¬"ê°€ ì•„ë‹Œ "í•´ì•¼ í•  ì¼(Action Item)"ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.

---

## 2. Technical Stack (The "Vibe-Stack")

ë¹„ìš© íš¨ìœ¨ì„±(Cost-Efficiency)ê³¼ í™•ì¥ì„±(Scalability)ì„ ê³ ë ¤í•œ í”„ë¡œë•ì…˜ ë ˆë²¨ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤.

### ğŸ¨ Frontend (Client)

* **Framework:** Next.js 15 (App Router)
* **Styling:** Tailwind CSS + Shadcn UI (Radix Primitives)
* **State Management:** React Query (TanStack Query)
* **Features:**
* Real-time Progress UI (SSE or Polling)
* **Markdown Preview & Copy/Download**



### âš™ï¸ Backend (Server & Worker)

* **API Server:** FastAPI (Python 3.11+) - *High Concurrency*
* **Task Queue:** **Arq + Redis** - *Asynchronous Processing (Non-blocking)*
* **Auth:** Clerk (User Management)

### ğŸ§  AI & Logic Engine

* **LLM Gateway:** **LiteLLM** (Unified Interface for OpenAI/Gemini/Claude)
* **Primary Model:** `GPT-4o-mini` (Cost-effective Summarization)
* **Deep Dive Model:** `GPT-4o` (Complex Insight Extraction)
* **Audio Processing:** **Groq Whisper API** (Lightning fast YouTube STT fallback)

### ğŸ•·ï¸ Scraping Pipeline (The "Waterfall" Strategy)

1. **L1 (Fast & Cheap):** `Trafilatura` (Python lib) - Extract main text only.
2. **L2 (Stealth):** `Playwright` + `Stealth Plugin` - Headless Browser with residential proxy.
3. **L3 (Sure-fire):** `Firecrawl API` - Fallback for heavily protected sites.

---

## 3. System Workflow

### Step 1: Ingestion (ë¹„ë™ê¸° ì²˜ë¦¬)

* ìœ ì €ê°€ URLì„ ì…ë ¥í•˜ë©´ ì¦‰ì‹œ `Job ID`ë¥¼ ë°˜í™˜í•˜ê³  UIëŠ” "Processing..." ìƒíƒœë¡œ ì „í™˜ë©ë‹ˆë‹¤.
* ë°±ì—”ë“œëŠ” ì‘ì—…ì„ **Redis Queue**ì— ë„£ê³  ì¦‰ì‹œ ì‘ë‹µí•©ë‹ˆë‹¤ (User Interaction Latency < 200ms).

### Step 2: Adaptive Extraction (ì§€ëŠ¥í˜• ì¶”ì¶œ)

* **YouTube URL:**
1. `youtube-transcript-api` ì‹œë„.
2. ì‹¤íŒ¨ ì‹œ `yt-dlp`ë¡œ ì˜¤ë””ì˜¤ ë‹¤ìš´ë¡œë“œ -> `Groq Whisper`ë¡œ ë³€í™˜ (ì†ë„/ë¹„ìš© ìµœì í™”).


* **Web URL:**
1. `Trafilatura`ë¡œ HTML íŒŒì‹± ì‹œë„.
2. ì‹¤íŒ¨ ì‹œ `Playwright` ê°€ë™.
3. ìµœí›„ ìˆ˜ë‹¨ìœ¼ë¡œ `Firecrawl` í˜¸ì¶œ.



### Step 3: AI Structuring (ì§€ì‹ êµ¬ì¡°í™”)

* LLMì´ ì½˜í…ì¸ ë¥¼ ë¶„ì„í•˜ì—¬ ë‹¤ìŒ 3ê°€ì§€ ë ˆì´ì–´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤:
1. **One-Liner:** í•œ ì¤„ ìš”ì•½.
2. **Key Insights:** í•µì‹¬ ë‚´ìš© 3~5ê°€ì§€.
3. **Action Items:** ì‹¤í–‰ ê°€ëŠ¥í•œ í•  ì¼ (`- [ ] Task`).


### Step 4: Distribution (ë°°í¬)

* **Notion:** ìœ ì €ê°€ ì—°ê²°í•œ DBì— APIë¡œ ì¦‰ì‹œ ì ì¬. 
* **Markdown:** í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `.md` íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë˜ëŠ” í´ë¦½ë³´ë“œ ë³µì‚¬ ì œê³µ.

---

## 4. Output Schema

### A. Notion Database Schema

| Property | Type | Description |
| --- | --- | --- |
| **Name** | Title | AI-refined Title |
| **URL** | URL | Original Source |
| **Category** | Multi-select | Auto-tagged by AI |
| **Status** | Status | `To Read` / `Reading` / `Done` |
| **Summary** | Text | High-level summary |
| **Action Items** | Text | Checkbox list generated by AI |
| **Priority** | Select | â­ ~ â­â­â­â­â­ |
| **Processed At** | Date | Timestamp |

### B. Markdown Frontmatter (For Obsidian)

```markdown
---
title: "AI-refined Title"
source: "https://original-url.com"
tags: [AI, Tech, Startup, etc]
status: To Read
summary: 
action items:
priority: High
processed_at: 2024-05-20
---

## ğŸ“ Summary
(Content here...)

## âœ… Action Items
- [ ] Research competitor X
- [ ] Draft initial architecture

```
## 6. Monetization & Operational Safety (Wallet Security)

To ensure financial sustainability and prevent API abuse, the system implements a **Strict Quota Management** logic at the Backend level.

### ğŸ›¡ï¸ Rate Limiting Strategy
* **Daily Quota (Free Tier):** Limit to 10 URLs per day per user (Tracked via Redis + Supabase).
* **Concurrency Limit:** Max 2 simultaneous processing jobs per user to prevent Redis overload.
* **Cost Tracking:** Real-time token usage monitoring for LLM and Scraping APIs.

### âš™ï¸ Implementation Detail (Middleware)
* **Redis In-Memory Counter:** Fast increment/check logic during the Ingestion step.
* **Clerk Identity Hook:** Validate user tier (Free/Pro) before pushing jobs to the Arq queue.

### ğŸ“º Phase 1 Ad Strategy: Static & Sticky Banners
To offset API operational costs from Day 1, we implement non-intrusive banner ads.
* **Placement:** * **Top Leaderboard (728x90):** Visible on the Dashboard header for brand awareness.
    * **Sticky Bottom Anchor (320x50):** Persistent visibility on Mobile PWA without disrupting the main content flow.
    * **In-feed Placeholder:** Displayed during the "Processing..." state while the AI engine works.
* **Provider:** Google AdSense (Auto-ads enabled) or custom internal sponsorship banners.

### ğŸ’° Ad-Supported Free Tier (Rewarded Strategy)
To provide high-quality AI summaries for free, we implement a **Rewarded Ad-Wall**.
* **Logic:** Users can process up to 3 URLs for free. After reaching the limit, watching a 15-30s video ad grants 5 additional "Summary Credits."
* **Benefit:** Offsets LLM/Scraping API costs while maintaining high user retention.

### ğŸ›¡ï¸ Implementation Hook (Backend + Frontend)
* **Backend:** `/process` endpoint checks `user.credits`. If 0, returns a `402 Payment Required (Ad Required)` status.
* **Frontend:** Triggers the Rewarded Ad SDK (e.g., AdMob, Unity Ads) when receiving a 402 status.
---

## 7. Directory Structure (Monorepo-like)

```bash
link-collector/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                 # Next.js Frontend
â”‚   â”‚   â”œâ”€â”€ components/      # UI Components (Shadcn)
â”‚   â”‚   â”œâ”€â”€ hooks/           # Custom React Hooks
â”‚   â”‚   â””â”€â”€ lib/             # Markdown Converter logic
â”‚   â””â”€â”€ api/                 # FastAPI Backend
â”‚       â”œâ”€â”€ core/            # Config & Settings
â”‚       â”œâ”€â”€ services/
â”‚       â”‚   â”œâ”€â”€ scraper.py   # Waterfall Logic
â”‚       â”‚   â”œâ”€â”€ llm.py       # LiteLLM & Prompts
â”‚       â”‚   â””â”€â”€ notion.py    # Notion Client
â”‚       â”œâ”€â”€ worker.py        # Arq/Redis Worker
â”‚       â””â”€â”€ main.py          # API Endpoints
â”œâ”€â”€ packages/                # Shared utilities (Optional)
â””â”€â”€ docker-compose.yml       # Redis + API + Web local setup

```
## 8. Brand & Experience Architecture

### ğŸ¨ Visual Identity
* **Theme:** "Modern Archive" - Minimalist interface with high-density typography.
* **Colors:** Deep Indigo (#1A1B26) for trust, Electric Violet (#7AA2F7) for AI accents.
* **Typography:** Optimized for readability (Sans-serif for UI, Serif/Monospace for Content).

### ğŸ•¹ï¸ Key Experience (UX)
1. **Zen Input:** Minimalist URL input with immediate visual feedback (Favicon/Domain fetch).
2. **Dynamic Progress:** Storytelling-based loading states to reduce perceived latency.
3. **Smart Quota Wall:** Gentle "Energy Recharge" UI for rewarded ads, avoiding hard-stops.

### ğŸ“± Mobile/PWA Optimization
* **Bottom Sheet UI:** Navigation and action menus pop up from the bottom for easy one-handed use.
* **Haptic Feedback:** Subtle vibrations on successful capture and Notion sync.
---

## 9. Installation & Setup

1. **Clone & Env Setup**
```bash
git clone https://github.com/vibecoding/link-collector.git
cp .env.example .env
# Set OPENAI_API_KEY, NOTION_SECRET, GROQ_API_KEY, REDIS_URL

```

2. **Run with Docker (Recommended)**
```bash
docker-compose up --build

```

* Frontend: `http://localhost:3000`
* Backend Docs: `http://localhost:8000/docs`

---

## 10. Roadmap & Future Features

Phase 1: Robust Foundation & Wallet Security (MVP)
[ ] Core Engine: Implement URL-to-Markdown pipeline (Trafilatura/Firecrawl/Gemini).
[ ] Wallet Security: Integrate Redis-based Rate Limiting & Daily Quota per User ID.
[ ] Minimal UI/UX: Build a functional PWA interface with a "One-click Capture" focus.
[ ] Export: Basic Markdown file download & Clipboard copy.
[ ] Monetization: Banner ads
[ ] Launch

Phase 2: Hybrid Monetization & Engagement
[ ] Ad-Supported Credits: Implement "Watch Ads for 5 Extra Summaries" logic.
[ ] User Feedback Loop: Analytics to track feature usage and drop-off points.
[ ] Notion Sync: Direct API integration for automatic database logging.
[ ] Obsidian/Logseq Sync: Automated Markdown syncing to local/cloud directories.
[ ] Subscription Model: Launch "Pro Plan" for ad-free, unlimited processing

---

> **Vibecoding's Note:**
> This project is built to scale. We prioritize **robustness** (handling web chaos) over **simplicity**.
> *"Don't just save links. Build your second brain."*